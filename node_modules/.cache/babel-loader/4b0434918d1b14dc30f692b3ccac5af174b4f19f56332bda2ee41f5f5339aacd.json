{"ast":null,"code":"// src/components/UploadForm.jsx\nimport{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UploadForm(){const[clientName,setClientName]=useState(\"\");const[files,setFiles]=useState({cpf:null,cnh:null,rg:null,energyBill:null,phoneEmail:null,additionalDocs:[]});const[sharedLink,setSharedLink]=useState(\"\");const[copySuccess,setCopySuccess]=useState(\"\");const handleFileChange=(e,field)=>{const file=e.target.files[0];setFiles(prevFiles=>({...prevFiles,[field]:file}));};const handleAdditionalDocsChange=e=>{const filesArray=Array.from(e.target.files);setFiles(prevFiles=>({...prevFiles,additionalDocs:filesArray}));};const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append(\"clientName\",clientName);// Adiciona arquivos ao FormData\nObject.entries(files).forEach(_ref=>{let[key,file]=_ref;if(file){if(Array.isArray(file)){file.forEach((f,index)=>{formData.append(\"files\",new File([f],`${clientName}_${key}_${index+1}.${f.name.split(\".\").pop()}`));});}else{formData.append(\"files\",new File([file],`${clientName}_${key}.${file.name.split(\".\").pop()}`));}}});try{const response=await fetch(\"https://up-lethan.onrender.com/api/upload\",{method:\"POST\",body:formData});if(!response.ok){throw new Error(\"Erro no envio do formulário\");}const result=await response.json();console.log(\"Response from server:\",result);// Log da resposta para depuração\nif(result.sharedLink){setSharedLink(result.sharedLink);// Atualiza o estado com o link\nalert(\"Arquivos enviados com sucesso!\");}else{alert(\"Erro: Link de compartilhamento não encontrado na resposta.\");}setCopySuccess(\"\");// Reseta a mensagem de sucesso de cópia\n}catch(error){console.error(\"Erro ao enviar arquivos:\",error);alert(\"Falha ao enviar os arquivos. Por favor, tente novamente.\");}};const handleCopyLink=()=>{navigator.clipboard.writeText(sharedLink).then(()=>setCopySuccess(\"Link copiado com sucesso!\")).catch(err=>console.error(\"Erro ao copiar o link:\",err));};return/*#__PURE__*/_jsx(\"div\",{className:\"upload-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"Logo\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload de Documentos\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Fa\\xE7a o upload dos documentos para an\\xE1lise\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clientName,onChange:e=>setClientName(e.target.value),placeholder:\"Nome do Cliente\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CPF:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileChange(e,\"cpf\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"CNH:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileChange(e,\"cnh\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"RG:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileChange(e,\"rg\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Conta de Energia:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileChange(e,\"energyBill\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Celular e E-mail:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileChange(e,\"phoneEmail\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Documentos Adicionais:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:handleAdditionalDocsChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Enviar\"})]}),sharedLink&&/*#__PURE__*/_jsxs(\"div\",{className:\"shared-link\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Link de compartilhamento:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"link-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:sharedLink,readOnly:true,className:\"link-text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCopyLink,className:\"copy-button\",children:\"Copiar\"})]}),copySuccess&&/*#__PURE__*/_jsx(\"p\",{className:\"copy-success\",children:copySuccess})]})]})});}export default UploadForm;","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","UploadForm","clientName","setClientName","files","setFiles","cpf","cnh","rg","energyBill","phoneEmail","additionalDocs","sharedLink","setSharedLink","copySuccess","setCopySuccess","handleFileChange","e","field","file","target","prevFiles","handleAdditionalDocsChange","filesArray","Array","from","handleSubmit","preventDefault","formData","FormData","append","Object","entries","forEach","_ref","key","isArray","f","index","File","name","split","pop","response","fetch","method","body","ok","Error","result","json","console","log","alert","error","handleCopyLink","navigator","clipboard","writeText","then","catch","err","className","children","src","alt","onSubmit","type","value","onChange","placeholder","required","multiple","readOnly","onClick"],"sources":["/Users/douglascustodio/up.lethan/src/UploadForm.jsx"],"sourcesContent":["// src/components/UploadForm.jsx\nimport { useState } from \"react\";\n\nfunction UploadForm() {\n  const [clientName, setClientName] = useState(\"\");\n  const [files, setFiles] = useState({\n    cpf: null,\n    cnh: null,\n    rg: null,\n    energyBill: null,\n    phoneEmail: null,\n    additionalDocs: [],\n  });\n  const [sharedLink, setSharedLink] = useState(\"\");\n  const [copySuccess, setCopySuccess] = useState(\"\");\n\n  const handleFileChange = (e, field) => {\n    const file = e.target.files[0];\n    setFiles((prevFiles) => ({\n      ...prevFiles,\n      [field]: file,\n    }));\n  };\n\n  const handleAdditionalDocsChange = (e) => {\n    const filesArray = Array.from(e.target.files);\n    setFiles((prevFiles) => ({\n      ...prevFiles,\n      additionalDocs: filesArray,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"clientName\", clientName);\n\n    // Adiciona arquivos ao FormData\n    Object.entries(files).forEach(([key, file]) => {\n      if (file) {\n        if (Array.isArray(file)) {\n          file.forEach((f, index) => {\n            formData.append(\n              \"files\",\n              new File(\n                [f],\n                `${clientName}_${key}_${index + 1}.${f.name.split(\".\").pop()}`\n              )\n            );\n          });\n        } else {\n          formData.append(\n            \"files\",\n            new File([file], `${clientName}_${key}.${file.name.split(\".\").pop()}`)\n          );\n        }\n      }\n    });\n\n    try {\n      const response = await fetch(\"https://up-lethan.onrender.com/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Erro no envio do formulário\");\n      }\n\n      const result = await response.json();\n      console.log(\"Response from server:\", result);  // Log da resposta para depuração\n\n      if (result.sharedLink) {\n        setSharedLink(result.sharedLink);  // Atualiza o estado com o link\n        alert(\"Arquivos enviados com sucesso!\");\n      } else {\n        alert(\"Erro: Link de compartilhamento não encontrado na resposta.\");\n      }\n      setCopySuccess(\"\");  // Reseta a mensagem de sucesso de cópia\n    } catch (error) {\n      console.error(\"Erro ao enviar arquivos:\", error);\n      alert(\"Falha ao enviar os arquivos. Por favor, tente novamente.\");\n    }\n  };\n\n  const handleCopyLink = () => {\n    navigator.clipboard.writeText(sharedLink)\n      .then(() => setCopySuccess(\"Link copiado com sucesso!\"))\n      .catch((err) => console.error(\"Erro ao copiar o link:\", err));\n  };\n\n  return (\n    <div className=\"upload-container\">\n      <div className=\"form-box\">\n        <img src=\"/logo.png\" alt=\"Logo\" className=\"logo\" />\n        <form onSubmit={handleSubmit}>\n          <h1>Upload de Documentos</h1>\n          <h2>Faça o upload dos documentos para análise</h2>\n          <input\n            type=\"text\"\n            value={clientName}\n            onChange={(e) => setClientName(e.target.value)}\n            placeholder=\"Nome do Cliente\"\n            required\n          />\n          <div className=\"upload-group\">\n            <label>CPF:</label>\n            <input type=\"file\" onChange={(e) => handleFileChange(e, \"cpf\")} />\n          </div>\n          <div className=\"upload-group\">\n            <label>CNH:</label>\n            <input type=\"file\" onChange={(e) => handleFileChange(e, \"cnh\")} />\n          </div>\n          <div className=\"upload-group\">\n            <label>RG:</label>\n            <input type=\"file\" onChange={(e) => handleFileChange(e, \"rg\")} />\n          </div>\n          <div className=\"upload-group\">\n            <label>Conta de Energia:</label>\n            <input type=\"file\" onChange={(e) => handleFileChange(e, \"energyBill\")} />\n          </div>\n          <div className=\"upload-group\">\n            <label>Celular e E-mail:</label>\n            <input type=\"file\" onChange={(e) => handleFileChange(e, \"phoneEmail\")} />\n          </div>\n          <div className=\"upload-group\">\n            <label>Documentos Adicionais:</label>\n            <input type=\"file\" multiple onChange={handleAdditionalDocsChange} />\n          </div>\n          <button type=\"submit\">Enviar</button>\n        </form>\n        {sharedLink && (\n          <div className=\"shared-link\">\n            <p>Link de compartilhamento:</p>\n            <div className=\"link-container\">\n              <input type=\"text\" value={sharedLink} readOnly className=\"link-text\" />\n              <button onClick={handleCopyLink} className=\"copy-button\">Copiar</button>\n            </div>\n            {copySuccess && <p className=\"copy-success\">{copySuccess}</p>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UploadForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}